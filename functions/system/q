in_tmux() {
  [[ -n $TMUX ]]
}

# exit if not in tmux
if ! in_tmux; then
  exit
fi

# exit if only one session
num_sessions=$(tmux list-sessions | wc -l)
if (( $num_sessions == 1 )); then
  exit
fi

# switch to next session and quit previous session
old_session=$(tmux list-sessions | grep attached | awk -F: '{ print $1 }')
tmux switch-client -n
tmux kill-session -t "$old_session"
# vi: set ft=sh:
